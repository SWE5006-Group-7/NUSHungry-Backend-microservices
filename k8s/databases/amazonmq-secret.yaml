# Amazon MQ (RabbitMQ) Secret 配置模板
#
# ⚠️ 重要：此文件不应包含真实密码！
# 请使用以下命令创建真实的 Secret：
#
# kubectl create secret generic amazonmq-secret \
#   --from-literal=host=b-xxxx-xxxx.mq.ap-southeast-1.amazonaws.com \
#   --from-literal=port=5671 \
#   --from-literal=username=admin \
#   --from-literal=password=YOUR_RABBITMQ_PASSWORD \
#   --from-literal=vhost="/" \
#   --from-literal=ssl="true" \
#   -n nushungry-dev
#
# 或者使用 Terraform 输出的便捷命令：
# terraform output -raw create_k8s_amazonmq_secret | bash
#
# Amazon MQ 连接注意事项：
# - port: 必须使用 5671 (TLS 端口)，5672 端口已禁用
# - ssl: 必须设置为 "true"，强制使用 TLS 加密
# - host: 从 Terraform output 获取 rabbitmq_host
# - username: 默认管理员用户名 "admin"
# - password: 在 terraform.tfvars 中配置的密码
# - vhost: RabbitMQ 虚拟主机，默认 "/"
#
# Secret 数据项说明：
# - host: Amazon MQ Broker 域名
# - port: AMQP over TLS 端口（5671）
# - username: RabbitMQ 用户名
# - password: RabbitMQ 密码
# - vhost: 虚拟主机
# - ssl: 是否启用 SSL（必须为 "true"）

---
apiVersion: v1
kind: Secret
metadata:
  name: amazonmq-secret
  namespace: nushungry-dev
  labels:
    app: nushungry
    component: messagequeue
type: Opaque
# 示例数据（Base64 编码的占位符，实际部署时请删除）
# data:
#   host: Yi14eHh4LXh4eHgubXEuYXAtc291dGhlYXN0LTEuYW1hem9uYXdzLmNvbQ==  # b-xxxx-xxxx.mq.ap-southeast-1.amazonaws.com
#   port: NTY3MQ==  # 5671
#   username: YWRtaW4=  # admin
#   password: WVVVX1JBQkJJVE1RX1BBU1NXT1JE  # YOUR_RABBITMQ_PASSWORD
#   vhost: Lw==  # /
#   ssl: dHJ1ZQ==  # true
